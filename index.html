<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IT Tech Suite | Blindado</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --bg: #0a0c10; --primary: #3fb1ff; --card: #161b22; --border: #30363d;
        }

        /* EVITAR SELECCIÓN Y ARRASTRE */
        * { 
            user-select: none !important; 
            -webkit-user-select: none !important;
            -webkit-user-drag: none !important;
        }

        body { 
            background: var(--bg); color: #e6edf3; font-family: sans-serif; 
            margin: 0; display: flex; height: 100vh; overflow: hidden;
        }

        /* CAPA DE BLOQUEO VISUAL (ANTI-CAPTURA) */
        #blindfold {
            position: fixed; inset: 0; background: #000; z-index: 999999;
            display: none; align-items: center; justify-content: center;
        }

        /* LOGIN ORIGINAL */
        #lock-screen {
            position: fixed; inset: 0; background: var(--bg); z-index: 100000;
            display: flex; align-items: center; justify-content: center;
        }
        .lock-card {
            background: var(--card); padding: 40px; border-radius: 20px;
            border: 1px solid var(--border); text-align: center; width: 320px;
        }
        input, select, button {
            width: 100%; padding: 12px; margin-top: 15px; border-radius: 8px;
            border: 1px solid var(--border); background: #000; color: #fff;
        }
        button { background: var(--primary); color: #000; font-weight: bold; cursor: pointer; }

        /* INTERFAZ */
        nav { width: 250px; border-right: 1px solid var(--border); padding: 20px; }
        main { flex: 1; padding: 40px; overflow-y: auto; }
        .card { background: var(--card); border: 1px solid var(--border); padding: 20px; border-radius: 12px; margin-bottom: 20px; }
        .protected { filter: blur(100px); } /* Desenfoque al perder foco */
    </style>
</head>
<body oncontextmenu="return false">

<div id="blindfold"><h1>CONTENIDO PROTEGIDO</h1></div>

<div id="lock-screen">
    <div class="lock-card">
        <h2>Acceso Técnico</h2>
        <select id="role-select">
            <option value="user">Invitado</option>
            <option value="admin">Administrador</option>
        </select>
        <input type="password" id="pass-input" placeholder="Password">
        <button onclick="checkPass()">ENTRAR</button>
        <p id="hint" style="color:var(--primary); font-size:12px; margin-top:10px;"></p>
    </div>
</div>

<nav>
    <h2 style="color:var(--primary)">IT TOOLKIT</h2>
    <hr style="border-color:var(--border)">
    <p>Seguridad</p>
    <p>ISOs ESD</p>
    <p>Activación</p>
    <p>Hardware</p>
</nav>

<main id="app-body">
    <h1>Panel de Control</h1>
    <div class="card">
        <h3>Manuals WinAndOffice (ISOs ESD)</h3>
        <button onclick="window.open('https://manuals.winandoffice.com/es/categories-esd/')">Abrir Repositorio</button>
    </div>
    <div class="card">
        <h3>Activación (MAS)</h3>
        <p style="background:#000; padding:10px; border-radius:5px; color:#79c0ff">irm https://get.activated.win | iex</p>
    </div>
</main>

<script>
    // --- LOGIN ---
    const ADMIN_HASH = "240be518fabd2724ddb6f04eeb1da5967448d7e831c08c8fa822809f74c720a9";
    let guestKey = Math.random().toString(36).substring(2, 7).toUpperCase();
    document.getElementById('hint').innerText = "CLAVE GUEST: " + guestKey;

    async function checkPass() {
        const p = document.getElementById('pass-input').value;
        const r = document.getElementById('role-select').value;
        const h = await crypto.subtle.digest('SHA-256', new TextEncoder().encode(p)).then(b => Array.from(new Uint8Array(b)).map(x => x.toString(16).padStart(2, '0')).join(''));

        if ((r === 'admin' && h === ADMIN_HASH) || (r === 'user' && p === guestKey)) {
            document.getElementById('lock-screen').style.display = 'none';
        } else { alert("Error"); }
    }

    // --- BLINDAJE CONTRA CAPTURAS (INTERFERENCIA) ---
    
    function activateBlindfold() {
        const bf = document.getElementById('blindfold');
        bf.style.display = 'flex';
        // Limpiamos el portapapeles inmediatamente
        navigator.clipboard.writeText("Captura bloqueada por seguridad.");
        setTimeout(() => { bf.style.display = 'none'; }, 600);
    }

    document.addEventListener('keydown', (e) => {
        // Bloqueo de F12 y Ctrl+U
        if (e.key === "F12" || (e.ctrlKey && e.key === "u")) {
            e.preventDefault();
        }

        // Detección de Windows + Imprimir Pantalla y otros atajos de captura
        // Tecla Windows (Meta), Shift, e Imprimir Pantalla (PrintScreen)
        if (e.key === "PrintScreen" || e.key === "Snapshot" || (e.metaKey && e.key === "s") || (e.ctrlKey && e.key === "p")) {
            activateBlindfold();
        }
    });

    // Si el usuario presiona la tecla Windows, el navegador pierde el foco. 
    // Al perder el foco, desenfocamos la app totalmente.
    window.addEventListener('blur', () => {
        document.getElementById('app-body').classList.add('protected');
        activateBlindfold(); // También disparamos el flash negro por si acaso
    });

    window.addEventListener('focus', () => {
        document.getElementById('app-body').classList.remove('protected');
    });

    // Bloqueo preventivo de atajos comunes
    window.onkeydown = function(e) {
        if (e.keyCode == 44) { // Print Screen
            activateBlindfold();
            return false;
        }
    };
</script>
</body>
</html>
